/*! Phalanx - v0.0.1 ( 2013-05-19 ) - MIT */
(function(t){"use strict";function e(t,e){var s;return"function"==typeof t?s=t:(e=t,s=e.hasOwnProperty("constructor")?e.constructor:function(){}),delete e.constructor,_.extend(s.prototype,e),s.extend=Backbone.View.extend,Object.defineProperty(s,"extend",r),s.with=n,Object.defineProperty(s,"with",r),s.create=o,Object.defineProperty(s,"create",r),s.prototype.super=i,s}function n(t,e){var n,o=0,i=Object.keys(t),s=i.length,r={};for(e||(e={});s>o;o++)n=i[o],e[n]?r[e[n]]=t[n]:r[n]=t[n];return _.extend(this.prototype,r),this}function o(){var t=Object.create(this.prototype);return this.apply(t,arguments),t}function i(t,e){return this.constructor.__super__[t].apply(this,e)}var s={},r={writable:!1};s.MappingUI={ui:{},lookupUi:function(){for(var t,e,n={},o=0,i=Object.keys(this.ui),s=i.length;s>o;o++)t=i[o],e=this.ui[t],n[t]=this.$el.find(e);this.ui=n},releaseUi:function(){for(var t,e=0,n=Object.keys(this.ui),o=n.length;o>e;e++)t=n[e],this.ui[t]=null,delete this.ui[t]}};var a=e({constructor:function(t){t||(t={}),this.onCreate.apply(this,arguments),Backbone.Router.apply(this,arguments)}});_.extend(a.prototype,Backbone.Router.prototype,{initialize:function(){},onCreate:function(){},onDestroy:function(){}});var u=e({constructor:function(t){t||(t={}),this.onCreate.apply(this,arguments),Backbone.View.apply(this,arguments)}});u.with(s.MappingUI);var c=Backbone.View.prototype,l="data-component",p="data-component-uid";_.extend(u.prototype,c,{events:{},components:{},_createdComponents:{},setElement:function(){c.setElement.apply(this,arguments),this.el&&this.el.parentNode&&(this.lookupUi(),this.onSetElement(this.el))},delegateEvents:function(t){var e,n,o,i,s={},r=0,a=Object.keys(this.components),u=a.length;if(null==t){for(;u>r;r++)e=a[r],n=this.components[e].prototype,o=_.keys(n.events),i=_.map(n.events,this._getComponentEventClosure),_.extend(s,_.object(o,i));c.delegateEvents.apply(this,[_.extend(s,this.events)])}else c.delegateEvents.apply(this,arguments)},_getComponentEventClosure:function(t){return function(e){var n=this.getComponent(e.target);n[t].apply(n,arguments)}},getComponent:function(t){var e,n,o;do e=t.getAttribute(l);while(!e&&(t=t.parentNode));if(!e)throw Error("Component name is not detected from "+l);return o=t.getAttribute(p),o&&this._createdComponents[o]?this._createdComponents[o]:(n=new this.components[e](t),o=n.uid,t.setAttribute(p,o),this._createdComponents[o]=n,n)},destroyComponents:function(){for(var t,e,n=0,o=Object.keys(this._createdComponents),i=o.length;i>n;n++)t=o[n],e=this._createdComponents[t],e.destroy(),this._createdComponents[t]=null,delete this._createdComponents[t]},destroy:function(){this.undelegateEvents(),this.destroyComponents(),this.releaseUi(),this.onDestroy()},initialize:function(){},render:function(t){return this.$el.html(t),this},onCreate:function(){},onSetElement:function(){},onDestroy:function(){}});var h=e({constructor:function(t,e){e||(e={}),this.onCreate.apply(this,arguments),Backbone.Model.apply(this,arguments)}});_.extend(h.prototype,Backbone.Model.prototype,{initialize:function(){},onCreate:function(){},onDestroy:function(){}});var f=e({constructor:function(t,e){e||(e={}),this.onCreate.apply(this,arguments),Backbone.Collection.apply(this,arguments)}});_.extend(f.prototype,Backbone.Collection.prototype,{initialize:function(){},onCreate:function(){},onDestroy:function(){}});var d=e({el:null,$el:null,regions:{},options:{},_assignedMap:{},constructor:function(t){t||(t={}),t.el&&(this.el=t.el),t.regions&&_.extend(this.regions,t.regions),this.el?this.setElement(this.el):this.setElement("<div />"),this.onCreate.apply(this,arguments),this.initialize.apply(this,arguments)},setElement:function(t){this.$el=t instanceof Backbone.$?t:Backbone.$(t),this.el=this.$el[0]},assign:function(t,e){var n,o;if(n=this.regions[t],o=this.getRegionView(t),!n)throw Error("Could not get a selector from the region "+t);this.onChange(t,e,o),o&&o.destroy(),e.setElement(this.$el.find(n)[0]),this._assignedMap[t]=e},getRegionView:function(t){if(!(t in this.regions))throw Error("Specified region `"+t+"` is not declared");return this._assignedMap[t]},withdraw:function(t){var e;return e=this.getRegionView(t),e.destroy(),this._assignedMap[t]=null,e},destroy:function(){this.onDestroy();for(var t,e=0,n=Object.keys(this.regions),o=this.regions.length;o>e;e++)t=n[e],this.withdraw(t)},onChange:function(){},initialize:function(){},onCreate:function(){},onDestroy:function(){}}).with(Backbone.Events),y=0,g=e({el:null,$el:null,events:{},uid:null,constructor:function(t){this.setElement(t),this.uid=y++,this.lookupUi(),this.onCreate.apply(this,arguments),this.initialize.apply(this,arguments)},setElement:function(t){this.$el=t instanceof Backbone.$?t:Backbone.$(t),this.el=this.$el[0]},destroy:function(){this.el=this.$el=null,this.releaseUi(),this.onDestroy()},initialize:function(){},onCreate:function(){},onDestroy:function(){}}).with(Backbone.Events).with(s.MappingUI),m={defineClass:e,Router:a,Model:h,Collection:f,View:u,Layout:d,Component:g,Trait:s};"function"==typeof define&&"object"==typeof define.amd&&define.amd?t.define(function(){return m}):"object"==typeof module&&module&&"object"==typeof exports&&exports&&module.exports===exports?module.exports=m:t.Phalanx=m})(this);
//@ sourceMappingURL=phalanx.map